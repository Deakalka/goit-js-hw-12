{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42435331-5518aafb74583ec5494003d9b';\nconst PER_PAGE = 15;\n\nexport class PixabayAPI {\n    constructor() {\n        this.query = null;\n    }\n\n    async getImages() {\n        const params = {\n            key: API_KEY,\n            q: this.query,\n            page: 1, \n            per_page: PER_PAGE,\n        };\n        const url = `${BASE_URL}`;\n        return axios.get(url, { params }).then(res => res.data);\n    }\n\n    async getMoreImages(page) {\n        const params = {\n            key: API_KEY,\n            q: this.query,\n            page: this.page, \n            per_page: PER_PAGE,\n        };\n        const url = `${BASE_URL}`;\n        return axios.get(url, { params }).then(res => res.data);\n    }\n}","import iziToast from \"izitoast\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst options = {\n    captionsData: 'alt',\n    captionDelay: 250,\n};\n\nlet lightBox = new SimpleLightbox('.gallery-link', options);\n\nexport function renderImages(data, imgEl) {\n    const imagesMarkup = data.hits.map(img => imgTemplate(img)).join('');\n    imgEl.innerHTML = imagesMarkup;\n    lightBox.refresh();\n}\n\nexport function renderMoreImages(data, imgEl) {\n    const imagesMarkup = data.hits.map(img => imgTemplate(img)).join('');\n    imgEl.insertAdjacentHTML('beforeend', imagesMarkup);\n    lightBox.refresh();\n}\n\nexport function showErrorMatch() {\n    iziToast.error({\n        position: \"topRight\",\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n    });\n}\n\nexport function showErrorFind() {\n    iziToast.error({\n        position: \"topRight\",\n        message: 'No images found',\n    });\n}\n\nfunction imgTemplate(photo) {\n    return `\n        <div class=\"photo-container\">\n            <a class=\"gallery-link\" href=\"${photo.largeImageURL}\" data-lightbox=\"image\">\n                <img src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" class=\"photo\" />\n            </a>\n            <div class=\"photo-body\">\n                <p class=\"photo-name\">Likes ${photo.likes}</p>\n                <p class=\"photo-name\">Views ${photo.views}</p>\n                <p class=\"photo-name\">Comments ${photo.comments}</p>\n                <p class=\"photo-name\">Downloads ${photo.downloads}</p>\n            </div>\n        </div>\n    `;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { PixabayAPI } from \"./js/pixabay-api\";\nimport { renderImages, renderMoreImages, showErrorMatch, showErrorFind } from \"./js/render-functions\";\n\nconst refs = {\n    formEl: document.querySelector('.js-search-form'),\n    imgEl: document.querySelector('.js-image-container'),\n    loader: document.querySelector('.loader'),\n    btnLoadMore: document.querySelector('.loadmore-btn'),\n};\n\nfunction showLoader() {\n    refs.loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n    refs.loader.classList.add('hidden');\n}\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.btnLoadMore.addEventListener('click', onLoadMoreClick);\n\nconst pixabayAPI = new PixabayAPI();\nlet currentPage = 1; \n\nasync function onFormSubmit(e) {\n    e.preventDefault();\n    showLoader();\n\n    const query = e.target.elements.text.value; \n    pixabayAPI.query = query;\n    currentPage = 1; \n\n    try {\n        const data = await pixabayAPI.getImages();\n        renderImages(data, refs.imgEl);\n        if (data.hits.length === 0) {\n            throw new Error('No images found');\n        }\n   \n        refs.btnLoadMore.style.display = 'block';\n    } catch (error) {\n        showErrorMatch();\n    } finally {\n        hideLoader(); \n    }\n}\n\nasync function onLoadMoreClick() {\n    try {\n        currentPage++; \n        const data = await pixabayAPI.getMoreImages(currentPage); \n         if (data.hits.length === 0) {   \n            throw new Error();\n        }\n        \n        renderMoreImages(data, refs.imgEl);         \n    } catch (error) {\n        showErrorFind();\n    } \n}"],"names":["BASE_URL","API_KEY","PER_PAGE","PixabayAPI","params","url","axios","res","page","options","lightBox","SimpleLightbox","renderImages","data","imgEl","imagesMarkup","img","imgTemplate","renderMoreImages","showErrorMatch","iziToast","showErrorFind","photo","refs","showLoader","hideLoader","onFormSubmit","onLoadMoreClick","pixabayAPI","currentPage","query"],"mappings":"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"}