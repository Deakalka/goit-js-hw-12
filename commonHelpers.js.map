{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42435331-5518aafb74583ec5494003d9b';\nconst PER_PAGE = 15;\n\nexport class PixabayAPI {\n    constructor() {}\n\n    async getImages(query) {\n        const params = {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo', \n            orientation: 'horizontal', \n            safesearch: true, \n            page: 1,\n            per_page: PER_PAGE,\n        };\n        const url = `${BASE_URL}`;\n        return axios.get(url, { params }).then(res => res.data);\n    }\n\n    async getMoreImages(query, page) {\n        page++;\n        const params = {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal', \n            safesearch: true, \n            page: page,\n            per_page: PER_PAGE,\n        };\n        const url = `${BASE_URL}`;\n        return axios.get(url, { params }).then(res => res.data);\n    }\n}\n","import iziToast from \"izitoast\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst options = {\n    captionsData: 'alt',\n    captionDelay: 250,\n};\n\nlet lightBox = new SimpleLightbox('.gallery-link', options);\n\nexport function renderImages(data, imgEl) {\n    const imagesMarkup = data.hits.map(img => imgTemplate(img)).join('');\n    imgEl.innerHTML = imagesMarkup;\n    lightBox.refresh();\n}\n\nexport function renderMoreImages(data, imgEl) {\n    const imagesMarkup = data.hits.map(img => imgTemplate(img)).join('');\n    imgEl.insertAdjacentHTML('beforeend', imagesMarkup);\n    lightBox.refresh();\n}\n\nexport function showErrorMatch() {\n    iziToast.error({\n        position: \"topRight\",\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n    });\n}\n\nfunction imgTemplate(photo) {\n    return `\n        <div class=\"photo-container\">\n            <a class=\"gallery-link\" href=\"${photo.largeImageURL}\" data-lightbox=\"image\">\n                <img src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" class=\"photo\" />\n            </a>\n            <div class=\"photo-body\">\n                <p class=\"photo-name\"> <span>Likes</span> <span>${photo.likes}</span> </p>\n                <p class=\"photo-name\"> <span>Views</span> <span>${photo.views}</span> </p>\n                <p class=\"photo-name\"> <span>Comments</span> <span>${photo.comments}</span> </p>\n                <p class=\"photo-name\"> <span>Downloads</span> <span>${photo.downloads}</span> </p>\n            </div>\n        </div>\n    `;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { PixabayAPI } from \"./js/pixabay-api\";\nimport { renderImages, renderMoreImages, showErrorMatch } from \"./js/render-functions\";\n\nconst refs = {\n    formEl: document.querySelector('.js-search-form'),\n    imgEl: document.querySelector('.js-image-container'),\n    loader: document.querySelector('.loader'),\n    btnLoadMore: document.querySelector('.loadmore-btn'),\n};\n\nlet currentPage = 1;\nlet currentQuery = ''; \n\nfunction showLoader() {\n    refs.loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n    refs.loader.classList.add('hidden');\n}\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.btnLoadMore.addEventListener('click', onLoadMoreClick);\n\nconst pixabayAPI = new PixabayAPI();\n\nasync function onFormSubmit(e) {\n    e.preventDefault();\n    showLoader();\n\n    const query = e.target.elements.text.value.trim(); // Використовуємо trim(), щоб видалити зайві пробіли\n    currentQuery = query; \n    currentPage = 1; \n    \n    if (!query) {\n        hideLoader();\n        iziToast.warning({\n            position: \"topRight\",\n            message: 'Please enter a search query.',\n        });\n        return;\n    }\n\n    try {\n        const data = await pixabayAPI.getImages(query); \n        renderImages(data, refs.imgEl);\n        if (data.hits.length === 0) {\n            throw new Error('No images found');\n        }\n\n        refs.btnLoadMore.style.display = 'block';\n    } catch (error) {\n        showErrorMatch();\n    } finally {\n        hideLoader();\n    }\n}\n\nasync function onLoadMoreClick() {\n    try {\n        const data = await pixabayAPI.getMoreImages(currentQuery, currentPage); \n    \n        renderMoreImages(data, refs.imgEl);\n        currentPage++; \n        \n        if (data.hits.length < 15) {\n            refs.btnLoadMore.style.display = 'none';\n            iziToast.show({\n                title: '',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                color: 'red',\n                position: 'topRight'\n            });\n        }\n    } catch (error) {\n        refs.btnLoadMore.style.display = 'block';\n    }\n}\n"],"names":["BASE_URL","API_KEY","PER_PAGE","PixabayAPI","query","params","url","axios","res","page","options","lightBox","SimpleLightbox","renderImages","data","imgEl","imagesMarkup","img","imgTemplate","renderMoreImages","showErrorMatch","iziToast","photo","refs","currentPage","currentQuery","showLoader","hideLoader","onFormSubmit","onLoadMoreClick","pixabayAPI"],"mappings":"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"}